local function notify(title, desc, duration, bgColor, outlineColor, iconId)
    -- Default values
    duration = duration or 5
    bgColor = bgColor or Color3.fromRGB(15, 15, 15)
    outlineColor = outlineColor or Color3.fromRGB(255, 255, 255)
    iconId = iconId or "3926305904" -- Default info icon
    
    -- Create notification sound
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://4590662766"
    sound.Volume = 0.2
    sound.Parent = game:GetService("SoundService")
    sound:Play()
    
    -- Get parent GUI
    local parentGui = game:GetService("CoreGui"):FindFirstChild("RobloxGui") or game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    
    -- Create main frame with rounded corners
    local notification = Instance.new("Frame")
    notification.Name = "Notification"
    notification.BackgroundColor3 = bgColor
    notification.BackgroundTransparency = 0
    notification.BorderSizePixel = 0
    notification.Position = UDim2.new(1, 10, 0.05, 0) -- Start off-screen to the right
    notification.Size = UDim2.new(0, 250, 0, 0) -- More compact width, start with height 0 for animation
    notification.ZIndex = 100
    notification.ClipsDescendants = true
    notification.Parent = parentGui
    
    -- Add corner rounding
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6) -- Smaller radius for more compact look
    corner.Parent = notification
    
    -- Create white outline
    local outline = Instance.new("UIStroke")
    outline.Name = "Outline"
    outline.Color = outlineColor
    outline.Thickness = 1.5
    outline.Transparency = 0
    outline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    outline.Parent = notification
    
    -- Ripple animation effect
    local ripple = Instance.new("Frame")
    ripple.Name = "Ripple"
    ripple.BackgroundColor3 = outlineColor
    ripple.BackgroundTransparency = 0.7
    ripple.Size = UDim2.new(1, 0, 1, 0)
    ripple.Position = UDim2.new(0.5, 0, 0.5, 0)
    ripple.AnchorPoint = Vector2.new(0.5, 0.5)
    ripple.ZIndex = 101
    ripple.Parent = notification
    
    local rippleCorner = Instance.new("UICorner")
    rippleCorner.CornerRadius = UDim.new(0, 6)
    rippleCorner.Parent = ripple
    
    local rippleTween = game:GetService("TweenService"):Create(
        ripple,
        TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {Size = UDim2.new(1.5, 0, 1.5, 0), BackgroundTransparency = 1}
    )
    
    -- Create icon (customizable)
    local icon = Instance.new("ImageLabel")
    icon.Name = "Icon"
    icon.Image = "rbxassetid://"..iconId
    icon.ImageRectSize = Vector2.new(36, 36)
    icon.ImageRectOffset = Vector2.new(964, 324)
    icon.BackgroundTransparency = 1
    icon.Position = UDim2.new(0, 10, 0, 10) -- More compact positioning
    icon.Size = UDim2.new(0, 18, 0, 18) -- Smaller icon
    icon.ZIndex = 101
    icon.Parent = notification
    
    -- Create title text (more compact)
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Text = title or "Notification"
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.TextSize = 14 -- Smaller text
    titleLabel.Font = Enum.Font.GothamSemibold
    titleLabel.BackgroundTransparency = 1
    titleLabel.Position = UDim2.new(0, 35, 0, 10) -- More compact
    titleLabel.Size = UDim2.new(1, -40, 0, 18) -- More compact
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.ZIndex = 101
    titleLabel.Parent = notification
    
    -- Create description text (more compact)
    local descLabel = Instance.new("TextLabel")
    descLabel.Name = "Description"
    descLabel.Text = desc or ""
    descLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    descLabel.TextSize = 12 -- Smaller text
    descLabel.Font = Enum.Font.Gotham
    descLabel.BackgroundTransparency = 1
    descLabel.Position = UDim2.new(0, 10, 0, 35) -- More compact
    descLabel.Size = UDim2.new(1, -20, 1, -45) -- More compact
    descLabel.TextXAlignment = Enum.TextXAlignment.Left
    descLabel.TextYAlignment = Enum.TextYAlignment.Top
    descLabel.TextWrapped = true
    descLabel.ZIndex = 101
    descLabel.Parent = notification
    
    -- Create duration bar (more subtle)
    local durationBar = Instance.new("Frame")
    durationBar.Name = "DurationBar"
    durationBar.BackgroundColor3 = outlineColor
    durationBar.BorderSizePixel = 0
    durationBar.Position = UDim2.new(0, 0, 1, -2) -- Thinner bar
    durationBar.Size = UDim2.new(1, 0, 0, 2) -- Thinner bar
    durationBar.ZIndex = 101
    durationBar.Parent = notification
    
    -- Calculate required height based on text (more compact)
    local textService = game:GetService("TextService")
    local textSize = textService:GetTextSize(descLabel.Text, descLabel.TextSize, descLabel.Font, Vector2.new(descLabel.AbsoluteSize.X, math.huge))
    local requiredHeight = math.clamp(textSize.Y + 50, 70, 200) -- More compact height calculation
    
    -- Animate notification entrance
    local slideIn = game:GetService("TweenService"):Create(
        notification,
        TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out, 0, false, 0.1),
        {Position = UDim2.new(1, -260, 0.05, 0), Size = UDim2.new(0, 250, 0, requiredHeight)}
    )
    
    -- Animation for duration bar
    local durationTween = game:GetService("TweenService"):Create(
        durationBar,
        TweenInfo.new(duration, Enum.EasingStyle.Linear),
        {Size = UDim2.new(0, 0, 0, 2)}
    )
    
    -- Function to close notification with animations and sound
    local function closeNotification()
        if not notification or not notification.Parent then return end
        
        -- Play close sound
        local closeSound = Instance.new("Sound")
        closeSound.SoundId = "rbxassetid://4590662766"
        closeSound.Volume = 0.1
        closeSound.Parent = game:GetService("SoundService")
        closeSound:Play()
        
        -- Stop all tweens
        durationTween:Cancel()
        
        -- Create fade out tweens for all elements
        local fadeTweens = {}
        
        -- Fade out main frame
        table.insert(fadeTweens, game:GetService("TweenService"):Create(
            notification,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {BackgroundTransparency = 1}
        ))
        
        -- Fade out outline
        table.insert(fadeTweens, game:GetService("TweenService"):Create(
            outline,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {Transparency = 1}
        ))
        
        -- Fade out all text and images
        for _, child in ipairs(notification:GetDescendants()) do
            if child:IsA("TextLabel") then
                table.insert(fadeTweens, game:GetService("TweenService"):Create(
                    child,
                    TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                    {TextTransparency = 1}
                ))
            elseif child:IsA("ImageLabel") or child:IsA("ImageButton") then
                table.insert(fadeTweens, game:GetService("TweenService"):Create(
                    child,
                    TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                    {ImageTransparency = 1}
                ))
            end
        end
        
        -- Play all fade tweens
        for _, tween in ipairs(fadeTweens) do
            tween:Play()
        end
        
        -- Shrink animation
        local shrinkTween = game:GetService("TweenService"):Create(
            notification,
            TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In),
            {Size = UDim2.new(0, 250, 0, 0)}
        )
        
        -- Slide out animation
        local slideOut = game:GetService("TweenService"):Create(
            notification,
            TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In, 0, false, 0.2),
            {Position = UDim2.new(1, 10, 0.05, 0)}
        )
        
        shrinkTween:Play()
        slideOut:Play()
        slideOut.Completed:Wait()
        
        if notification and notification.Parent then
            notification:Destroy()
        end
    end
    
    -- Click-to-close functionality for the entire notification
    notification.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            -- Button press animation
            local pressTween = game:GetService("TweenService"):Create(
                notification,
                TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {Size = UDim2.new(0, 245, 0, requiredHeight - 5)}
            )
            pressTween:Play()
            pressTween.Completed:Wait()
            
            local releaseTween = game:GetService("TweenService"):Create(
                notification,
                TweenInfo.new(0.1, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out),
                {Size = UDim2.new(0, 250, 0, requiredHeight)}
            )
            releaseTween:Play()
            
            closeNotification()
        end
    end)
    
    -- Play ripple animation first
    rippleTween:Play()
    task.wait(0.1) -- Small delay before sliding in
    
    -- Then slide in the notification with bounce effect
    slideIn:Play()
    
    -- Start duration bar after slide in completes
    slideIn.Completed:Wait()
    durationTween:Play()
    
    -- Auto-close after duration
    spawn(function()
        durationTween.Completed:Wait()
        closeNotification()
    end)
    
    return notification
end

return notify
